name: Public IP

on: push


permissions:
 id-token: write 
 contents: read

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Public IP
      id: ip
      uses: haythem/public-ip@v1.2

    - name: Print Public IP
      run: |
        echo ${{ steps.ip.outputs.ipv4 }}
        echo ${{ steps.ip.outputs.ipv6 }}
    - name: Log in with Azure
      uses: azure/login@v1
       
      with:
          client-id: ${{ secrets.AZURE_CLIENT_ID }}
          tenant-id: ${{ secrets.AZURE_TENANT_ID }}
          subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}
          clientsecret: ${{secrets.CLIENT_SECRET_ID}}
  
    - name: 'Run Azure CLI commands'
      run: |
          az group list
           
