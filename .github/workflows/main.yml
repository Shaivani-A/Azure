name: Public IP

on: push


permissions:
 id-token: write 
 contents: read

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Public IP
      id: ip
      uses: haythem/public-ip@v1.2

    - name: Print Public IP
      run: |
        echo ${{ steps.ip.outputs.ipv4 }}
        echo ${{ steps.ip.outputs.ipv6 }}
    - name: Log in with Azure
      uses: azure/login@v1.1
       
      with:
          creds: ${{ secrets.AZURE_CRED_VALUES }}
          enable-AzPSSession: true

  
    - name: 'Run Azure CLI commands'
      run: |
        az vm list-ip-addresses --resource-group Web_app
        az vm list 
